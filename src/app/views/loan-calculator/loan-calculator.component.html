<div class="calculator-page">
  <form [formGroup]="loanForm" (ngSubmit)="onSubmit()">
    <div class="left-side">
      <div class="section">
        <h5>Loan Type</h5>

        <div class="checkbox-group">
          <div class="ckb-loan-type">
            <input type="radio" formControlName="loanType" [value]="1" />
            Home
          </div>
          <div class="ckb-loan-type">
            <input type="radio" formControlName="loanType" [value]="2" />
            Car
          </div>
          <div class="ckb-loan-type">
            <input type="radio" formControlName="loanType" [value]="3" />
            Personal
          </div>
          <div
            class="error-message"
            *ngIf="
              loanForm.get('loanType')!.hasError('required') &&
              loanForm.get('loanType')!.touched
            "
          >
            Please select a loan type.
          </div>
        </div>
      </div>
      <div class="section">
        <h5>Loan Amount</h5>
        <div class="input-container">
          <input
            type="range"
            class="slider"
            id="range-slider-loan-amount"
            formControlName="loanAmount"
            [min]="1000"
            [max]="200000"
            [step]="1000"
            [ngModel]="this.loanForm.controls['loanAmount'].value"
          />
          <input
            type="number"
            id="input-slider-loan-amount"
            class="input-slider-loan-amount"
            formControlName="loanAmount"
            [ngModel]="this.loanForm.controls['loanAmount'].value"
          />
        </div>
      </div>
      <div class="section">
        <h5>Interest Amount</h5>
        <div class="input-container">
          <input
            type="range"
            class="slider"
            id="range-slider-interest-amount"
            formControlName="interestAmount"
            [min]="0.1"
            [max]="25"
            [step]="0.1"
            [ngModel]="this.loanForm.controls['interestAmount'].value"
          />
          <input
            type="number"
            id="input-slider-interest-amount"
            class="input-slider-interest-amount"
            formControlName="interestAmount"
            [ngModel]="this.loanForm.controls['interestAmount'].value"
          />
          <span>% p.a.</span>
        </div>
      </div>
      <div class="section">
        <h5>Loan Term</h5>
        <div class="input-container">
          <input
            type="range"
            class="slider"
            id="range-slider-loan-term"
            formControlName="loanTerm"
            [min]="1"
            [max]="60"
            [ngModel]="this.loanForm.controls['loanTerm'].value"
          />
          <input
            type="number"
            id="input-slider-loan-term"
            class="input-slider-loan-term"
            formControlName="loanTerm"
            [ngModel]="this.loanForm.controls['loanTerm'].value"
          />
          <select name="term-type" id="term-type" formControlName="termType">
            <option value="year">Years</option>
            <option value="month">Months</option>
          </select>
        </div>
      </div>
    </div>

    <div class="right-side">
      <div class="card">
        <div class="card-top">
          <div class="row">
            <div class="info fw-bold">
              Loan
              <span *ngIf="loanForm.value.loanTypeResponse">
                : {{ loanForm.value.loanTypeResponse | uppercase }}
              </span>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="bar-graph">
            <app-graph-bar [list]="graphData"></app-graph-bar>
          </div>
          <div class="row">
            <span class="small-circle light-red"></span>
            <div class="info">Principal</div>
            <div class="amount-total">
              {{ loanForm.value.principal | currency }}
            </div>
          </div>
          <div class="row">
            <span class="small-circle dark-red"></span>
            <div class="info">Interest Payable</div>
            <div class="amount-total">
              {{ loanForm.value.interestPayable | currency }}
            </div>
          </div>
          <div class="row">
            <div class="info fw-bold">Total Amount Payable</div>
            <div class="amount-total fw-bold">
              {{ loanForm.value.totalAmountPayable | currency }}
            </div>
          </div>
        </div>
        <div class="card-footer">
          <button type="submit" class="apply">Calculate</button>
        </div>
      </div>
    </div>
  </form>
</div>
